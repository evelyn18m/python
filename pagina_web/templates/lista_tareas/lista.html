{% extends 'base.html' %}
{% block content %}
<h1>Lista De Tareas</h1>
<ul>
    {% for tarea in tareas %}
    <li>
        {{ tarea.get_estado_display}} -
        {{ tarea.titulo }}
        <a href="{% url 'detalle_tarea' tarea.id %}">Ver Detalles</a>
        <a href="{% url 'editar_tarea' tarea.id %}">Editar</a>
        <form action="{% url 'eliminar_tarea' tarea.id %}" method="post" class="form-eliminar">
            {% csrf_token %}
            <button type="submit">Eliminar</button>
        </form>
    </li>
    {% endfor %}
</ul>
<a href="{% url 'crear_tareas' %}">Crear Tarea</a>
<script>
    const formulariosEliminar=document.querySelectorAll(".form-eliminar");
    formulariosEliminar.forEach((form) => {
        form.addEventListener("submit", (e) => {
            if(!confirm("Esta seguro que desea eliminar esta tarea")) {
            e.preventDefault();
            }
        });
    });
</script>
{% endblock %}